<script type="module">
	// Add to separate .vue file
    import { createApp } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'
	import ButtonComponent from './Button.js'

    createApp({
		components: {
			ButtonComponent
		},
        data() {
            return {
                city: "",
				weather: {}
            }
        },
        methods: {
			GetWeather: getWeather
        }
    }).mount('#app')

	function getWeather() {
		console.log("getWeather called")
		let promise = fetch("weather/" + this.city)
		promise.then( response => response.json())
			.then (response => { 
				this.weather = response
			}
	)}
</script>

<!DOCTYPE html>
	<head>
		<title>Weather App</title>
	</head>
	<body>
		<div id="app">
			<h1>Weather App</h1>
			<button-component></button-component>
			<label>City Name</label>
			<input type="text" v-model="city">
			<br>
			
			<button v-on:click="GetWeather">Get Weather</button>
	
			<h2>{{city}} Weather</h2>
			<ul>
				<li v-for="item in weather.list">
					Day/Time: {{item.dt_txt}}
					<br>
					Temperature: {{item.main.temp}}
					<br>
					Feels Like: {{item.main.feels_like}}
				</li>
			</ul>
		</div>
	</body>
</html>